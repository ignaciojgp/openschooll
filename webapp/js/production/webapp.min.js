!function(){var a=angular.module("courseModule",["osapi","themeModule"]);a.controller("coursecontroller",function(a,b,c){function d(b){var d=c.url(),e=d.split("/"),f=e[2];if(f&&a.allthemes){var g=decodeURIComponent(f),h=a.allthemes.filter(function(a){return a.name==g})[0];h&&(a.selectedTheme=h)}}a.themes=[],a.$watch("view",function(){"all"==a.view?a.themes=a.allthemes:a.themes=a.mythemes},!0),a.regresar=function(){a.selectedTheme=null,c.path("/courses")},b.getAllThemes().then(function(b){a.allthemes=b,"all"==a.view&&(a.themes=a.allthemes),a.$on("$locationChangeSuccess",d),d(null)},function(a){alert(a)})})}(),function(){var a=angular.module("lessonModule",["osapi"]);a.directive("lessonDetail",function(a){return{link:function(b,c,d){b.$watch("lesson",function(){console.log("lesson change"),null!=b.lesson&&a.getLesson(b.lesson.id).then(function(a){b.lessonDetail=a},function(a){console.log("error en lesson detail"),console.log(a)})},!0)},scope:{lesson:"="},templateUrl:"js/courses/lessondetail.view.html"}})}(),function(){var a=angular.module("themeModule",["osapi","lessonModule"]);a.directive("themeDetail",["$location","osapi",function(a,b){return{link:function(c,d,e){function f(b){var d=a.url(),e=d.split("/"),f=e[3];if(f&&c.detail&&c.detail.lessons){var g=decodeURIComponent(f),h=c.detail.lessons.filter(function(a){return a.id==g})[0];h&&(c.selectedLesson=h)}}c.$watch("theme",function(){c.selectedLesson=null,c.detail=null,null!=c.theme&&b.getTheme(c.theme.id).then(function(a){c.detail=a,c.$on("$locationChangeSuccess",f),f(null)},function(a){})},!0),c.subscribe=function(){b.subscribe(c.theme.id).then(function(a){c.detail.subscription=1},function(a){})},c.selectLesson=function(b){a.path("/courses/"+c.theme.name+"/"+b.id)}},scope:{theme:"="},templateUrl:"js/courses/themedetail.view.html"}}]),a.directive("themeList",function(a){return{scope:{list:"=list"},controller:function(b){b.selectTheme=function(b){a.path("/courses/"+b.name)}},templateUrl:"js/courses/themelist.view.html"}})}();